---
import Layout from '@/layouts/Layout.astro'
import { getCompany } from '@/data/companies'
import CompanyEditor from '@/components/editor/CompanyEditor.svelte'

const { id = '' } = Astro.params
const wikidataId = id.split('-').at(-1) ?? ''
const company = wikidataId.startsWith('Q') ? await getCompany(wikidataId) : null
const title = `Redigera ${company?.name ?? 'företag'} | Klimatkollen`
---

<Layout {title}>
  {
    company ? (
      <div class="container mx-auto max-w-4xl px-4 py-8">
        <CompanyEditor client:load {company} />
      </div>
    ) : (
      <div class="container mx-auto max-w-4xl px-4 py-8">
        <p>Företaget hittades inte.</p>
      </div>
    )
  }
</Layout>
