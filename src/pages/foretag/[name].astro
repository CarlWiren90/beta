---
import Layout from '@/layouts/Layout.astro'
import { type CompanyData, isCompany } from '@/data/companyData'

const { name = '' } = Astro.params

const response = await fetch('https://api.klimatkollen.se/api/companies')
const data = await response.json()
const company: CompanyData = data
  .filter(isCompany)
  .find(
    (company: CompanyData) =>
      company.companyName.toLowerCase().replaceAll(' ', '-') ===
      name.toLowerCase()
  )
---

<Layout title="Klimatkollen - få koll på företagens utsläpp">
  {company.companyName}
</Layout>
